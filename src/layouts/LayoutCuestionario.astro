---

/**
 * @file LayoutCuestionario.astro
 * @description Layout especializado para las vistas públicas de encuestas.
 * * SISTEMA DE TEMAS (Theming):
 * - Cambia dinámicamente la paleta de colores según la prop `tipo`:
 * - 'epworth' -> Tonos Azules/Cielo (Calma).
 * - 'pittsburgh' -> Tonos Púrpura/Violeta (Sueño profundo).
 * - 'berlin' -> Tonos Esmeralda/Teal (Salud/Respiración).
 * * PROPÓSITO:
 * - Ofrecer una interfaz amigable, clara y legible para el paciente (Light Mode),
 * diferenciándola visualmente del panel administrativo oscuro.
 */

import '../styles/global.css'

const { title, tipo = 'default' } = Astro.props;

// --- CONFIGURACIÓN DE TEMAS ---
const themes = {
    epworth: {
        // Epworth (Somnolencia Diurna): Tonos cielo/día, enérgicos pero calmados
        bgGradient: "bg-gradient-to-br from-sky-50 via-blue-50 to-indigo-50",
        accentTitle: "from-sky-600 via-blue-500 to-indigo-600",
        blobColor1: "text-sky-300",
        blobColor2: "text-blue-200",
    },
    psqi: {
        // Pittsburgh (Calidad): Tonos nocturnos/profundos, violetas y púrpuras suaves
        bgGradient: "bg-gradient-to-br from-violet-50 via-purple-50 to-fuchsia-50",
        accentTitle: "from-violet-600 via-purple-500 to-fuchsia-600",
        blobColor1: "text-purple-300",
        blobColor2: "text-fuchsia-200",
    },
    berlin: {
        // Berlin (Apnea/Sueño): Tonos salud/restauración, esmeraldas y turquesas
        bgGradient: "bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50",
        accentTitle: "from-emerald-600 via-teal-500 to-cyan-600",
        blobColor1: "text-emerald-300",
        blobColor2: "text-teal-200",
    },
    default: {
        // Genérico (Slate limpio)
        bgGradient: "bg-gradient-to-br from-slate-50 via-gray-50 to-zinc-50",
        accentTitle: "from-blue-600 via-blue-400 to-blue-800",
        blobColor1: "text-slate-300",
        blobColor2: "text-gray-200",
    }
};

// Seleccionamos el tema o usamos el default si no existe
const theme = themes[tipo as keyof typeof themes] || themes.default;
---

<!doctype html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/logo.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
	</head>
	<body class={`font-sans min-h-screen relative overflow-x-hidden ${theme.bgGradient} selection:bg-blue-200 selection:text-blue-900`}>
		
        <div class="fixed inset-0 z-0 overflow-hidden pointer-events-none">
            <svg class={`absolute -top-[10%] -left-[10%] w-[50%] h-[50%] opacity-40 animate-blob ${theme.blobColor1}`} fill="currentColor" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                <path d="M44.7,-76.4C58.9,-69.2,71.8,-59.1,81.6,-46.6C91.4,-34.1,98.2,-19.2,95.8,-5.2C93.5,8.9,82.1,22.1,70.8,33.4C59.5,44.7,48.3,54.1,36.2,62.6C24.1,71.1,11.2,78.7,-0.9,80.3C-13,81.9,-25.9,77.5,-37.1,70.3C-48.3,63.1,-57.8,53.1,-66.4,41.9C-75,30.7,-82.7,18.3,-82.1,6.2C-81.5,-5.9,-72.6,-17.7,-63.3,-28.4C-54,-39.1,-44.3,-48.7,-33.5,-57.5C-22.7,-66.3,-10.8,-74.3,3.1,-79.6C17,-85,30.5,-73.6,44.7,-76.4Z" transform="translate(100 100)" />
            </svg>
            
            <svg class={`absolute top-[40%] -right-[10%] w-[60%] h-[60%] opacity-40 animate-blob animation-delay-2000 ${theme.blobColor2}`} fill="currentColor" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                <path d="M41.7,-71.3C54.7,-62.9,66.6,-53.4,75.2,-41.7C83.8,-30,89.1,-16.1,87.6,-2.6C86.1,10.9,77.8,24,68.4,35.6C59,47.2,48.5,57.3,36.6,63.5C24.7,69.7,11.4,72,-1.3,74.3C-14,76.6,-26.8,78.9,-38.1,74.7C-49.4,70.5,-59.2,59.8,-67.2,47.8C-75.2,35.8,-81.4,22.5,-80.7,9.5C-80,-3.5,-72.4,-16.2,-63.9,-27.7C-55.4,-39.2,-46,-49.5,-34.9,-58.5C-23.8,-67.5,-11.9,-75.2,1.3,-77.5C14.5,-79.8,28.7,-79.7,41.7,-71.3Z" transform="translate(100 100)" />
            </svg>
        </div>

        <div class="relative z-10 flex flex-col items-center justify-center p-6 md:pt-12 md:pb-8">
            <h1 class="text-4xl md:text-6xl font-extrabold text-center leading-tight text-gray-800 drop-shadow-sm">
                Laboratorio del 
                <span class={`bg-clip-text text-transparent bg-gradient-to-r ${theme.accentTitle}`}>
                    sueño
                </span>
            </h1>
		</div>

        <div class="relative z-10 p-6 md:p-10 max-w-5xl mx-auto shadow-xl shadow-gray-200/50 rounded-3xl bg-white/90 backdrop-blur-sm border border-white/50 mb-12">
			<slot />
		</div>

	</body>
</html>

<style>
    /* Animación flotante suave para los blobs */
    @keyframes blob {
        0% { transform: translate(0px, 0px) scale(1); }
        33% { transform: translate(30px, -50px) scale(1.1); }
        66% { transform: translate(-20px, 20px) scale(0.9); }
        100% { transform: translate(0px, 0px) scale(1); }
    }
    .animate-blob {
        animation: blob 7s infinite;
    }
    .animation-delay-2000 {
        animation-delay: 2s;
    }
</style>