---
/**
 * @component PatientTypeModal.astro
 * @description Modal para elegir entre paciente de Sueño o Ánimo antes de registrar
 */
---

<dialog id="modal-tipo-paciente" class="bg-gray-900 border border-gray-700 rounded-3xl p-0 shadow-2xl backdrop:backdrop-blur-sm w-full max-w-3xl text-left m-auto outline-none">
    <div class="p-6 border-b border-gray-800 flex justify-between items-center bg-gray-800/50">
        <h3 class="text-xl font-bold text-white flex items-center gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-emerald-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z" />
            </svg>
            Registrar nuevo paciente
        </h3>
        <button onclick="document.getElementById('modal-tipo-paciente').close()" class="text-gray-500 hover:text-white transition-colors cursor-pointer text-2xl leading-none">&times;</button>
    </div>
    
    <div class="p-6">
        <p class="text-gray-400 mb-6 text-sm">Seleccione el tipo de paciente que desea registrar.</p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            
            <a href="/registro/sueno" class="block group relative bg-gray-800/40 hover:bg-blue-900/20 border border-gray-700/50 hover:border-blue-500/50 p-6 rounded-2xl transition-all cursor-pointer text-left no-underline">
                <div class="flex items-center gap-4 mb-4">
                    <div class="p-3 bg-blue-500/20 rounded-xl text-blue-400 group-hover:bg-blue-500 group-hover:text-white transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                        </svg>
                    </div>
                    <h4 class="text-xl font-bold text-white group-hover:text-blue-300 transition-colors">Trastornos del Sueño</h4>
                </div>
                <p class="text-sm text-gray-400 leading-relaxed mb-4">
                    Polisomnografía, insomnio, apnea, titulación CPAP y trastornos del ritmo circadiano.
                </p>
                <span class="text-xs font-bold text-blue-400 uppercase tracking-widest group-hover:translate-x-1 transition-transform inline-block">Seleccionar &rarr;</span>
            </a>

            <a href="/registro/animo" class="block group relative bg-gray-800/40 hover:bg-purple-900/20 border border-gray-700/50 hover:border-purple-500/50 p-6 rounded-2xl transition-all cursor-pointer text-left no-underline">
                <div class="flex items-center gap-4 mb-4">
                    <div class="p-3 bg-purple-500/20 rounded-xl text-purple-400 group-hover:bg-purple-500 group-hover:text-white transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <h4 class="text-xl font-bold text-white group-hover:text-purple-300 transition-colors">Estado de Ánimo</h4>
                </div>
                <p class="text-sm text-gray-400 leading-relaxed mb-4">
                    Depresión, ansiedad, evaluación de funciones ejecutivas y protocolos TMS.
                </p>
                <span class="text-xs font-bold text-purple-400 uppercase tracking-widest group-hover:translate-x-1 transition-transform inline-block">Seleccionar &rarr;</span>
            </a>

        </div>
    </div>
</dialog>

<style>
    #modal-tipo-paciente {
        position: fixed;
        inset: 0;
        margin: auto;
    }

    #modal-tipo-paciente::backdrop {
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(4px);
    }

    /* CAMBIO: Renombramos la animación para evitar conflictos con SystemUpdate */
    #modal-tipo-paciente[open] {
        animation: fade-in-patient-modal 0.3s ease-out;
    }

    @keyframes fade-in-patient-modal {
        from { 
            opacity: 0; 
            transform: scale(0.95) translateY(10px); 
        }
        to { 
            opacity: 1; 
            transform: scale(1) translateY(0); 
        }
    }
</style>